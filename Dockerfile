FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHN0cmltemktYXBiCmRlc2NyaXB0aW9uOiBBcGFjaGUgS2Fma2Eg\
b24gS3ViZXJuZXRlcyBhbmQgT3BlblNoaWZ0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFN0cmltemkgKEFQQikKICBpbWFnZVVybDogImh0\
dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzQ3Njc0Mjg/cz0yMDAmdj00\
IgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwOi8vc3RyaW16aS5pby9kb2NzLzAuNC4wLyIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6CiAgICAt\
ICJkb2NrZXIuaW8vc3RyaW16aS9jbHVzdGVyLW9wZXJhdG9yOjAuNC4wIgogICAgLSAiZG9ja2Vy\
LmlvL3N0cmltemkvem9va2VlcGVyOjAuNC4wIgogICAgLSAiZG9ja2VyLmlvL3N0cmltemkva2Fm\
a2E6MC40LjAiCiAgCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFBl\
cnNpc3RlbnQgZGVwbG95bWVudCBvZiBBcGFjaGUgS2Fma2Egb24gT3BlbnNoaWZ0CiAgICBmcmVl\
OiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IGFkbWlu\
X3VzZXIKICAgICAgdGl0bGU6IE9wZW5zaGlmdCBBZG1pbiBVc2VyCiAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICB0\
aXRsZTogT3BlbnNoaWZ0IEFkbWluIFBhc3N3b3JkCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBk\
aXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IENM\
VVNURVJfTkFNRQogICAgICB0aXRsZTogTmFtZSBvZiB0aGUgY2x1c3RlcgogICAgICBkZXNjcmlw\
dGlvbjogQWxsIEt1YmVybmV0ZXMgcmVzb3VyY2VzIHdpbGwgYmUgbmFtZWQgYWZ0ZXIgdGhlIGNs\
dXN0ZXIgbmFtZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDogbXktY2x1c3Rlcgog\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBaT09LRUVQRVJfTk9ERV9DT1VOVAogICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0\
aXRsZTogTnVtYmVyIG9mIFpvb2tlZXBlciBub2RlcyBpbiB0aGUgcHJvamVjdAogICAgLSBuYW1l\
OiBLQUZLQV9OT0RFX0NPVU5UCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IDEK\
ICAgICAgdHlwZTogaW50CiAgICAgIHRpdGxlOiBOdW1iZXIgb2YgS2Fma2Egbm9kZXMgaW4gdGhl\
IHByb2plY3QKICAgIC0gbmFtZTogWk9PS0VFUEVSX1ZPTFVNRV9DQVBBQ0lUWQogICAgICB0aXRs\
ZTogWm9va2VlcGVyIFZvbHVtZSBDYXBhY2l0eQogICAgICBkZXNjcmlwdGlvbjogVm9sdW1lIHNw\
YWNlIGF2YWlsYWJsZSBmb3IgWm9va2VlcGVyIGRhdGEsIGUuZy4gMUdpLCAyR2kKICAgICAgdHlw\
ZTogZW51bQogICAgICBkZWZhdWx0OiAnMUdpJwogICAgICBlbnVtOiBbJzFHaScsICcyR2knLCAn\
NUdpJ10KICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogS0FGS0FfVk9MVU1FX0NBUEFD\
SVRZCiAgICAgIHRpdGxlOiBLYWZrYSBWb2x1bWUgQ2FwYWNpdHkKICAgICAgZGVzY3JpcHRpb246\
IFZvbHVtZSBzcGFjZSBhdmFpbGFibGUgZm9yIEthZmthIGRhdGEsIGUuZy4gMUdpLCAyR2kKICAg\
ICAgdHlwZTogZW51bQogICAgICBkZWZhdWx0OiAnMUdpJwogICAgICBlbnVtOiBbJzFHaScsICcy\
R2knLCAnNUdpJ10KICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogS0FGS0FfT0ZGU0VU\
U19UT1BJQ19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVm\
YXVsdDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNhdGlvbiBmYWN0\
b3IgZm9yIHRoZSBvZmZzZXRzIHRvcGljCiAgICAtIG5hbWU6IEtBRktBX1RSQU5TQUNUSU9OX1NU\
QVRFX0xPR19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVm\
YXVsdDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNhdGlvbiBmYWN0\
b3IgZm9yIHRoZSB0cmFuc2FjdGlvbiB0b3BpYwogICAgLSBuYW1lOiBaT09LRUVQRVJfSEVBTFRI\
Q0hFQ0tfREVMQVkKICAgICAgdGl0bGU6IFpvb2tlZXBlciBoZWFsdGhjaGVjayBpbml0aWFsIGRl\
bGF5CiAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB0aGUgY29udGFp\
bmVyIGhhcyBzdGFydGVkIGJlZm9yZSBoZWFsdGhjaGVjayBwcm9iZXMgYXJlIGluaXRpYXRlZAog\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxNQogICAgICB0eXBlOiBpbnQKICAg\
IC0gbmFtZTogWk9PS0VFUEVSX0hFQUxUSENIRUNLX1RJTUVPVVQKICAgICAgdGl0bGU6IFpvb2tl\
ZXBlciBoZWFsdGhjaGVjayB0aW1lb3V0CiAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vj\
b25kcyBhZnRlciB3aGljaCB0aGUgcHJvYmUgdGltZXMgb3V0CiAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgIGRlZmF1bHQ6IDUKICAgICAgdHlwZTogaW50CiAgICAtIG5hbWU6IEtBRktBX0hFQUxU\
SENIRUNLX0RFTEFZCiAgICAgIHRpdGxlOiBLYWZrYSBoZWFsdGhjaGVjayBpbml0aWFsIGRlbGF5\
CiAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB0aGUgY29udGFpbmVy\
IGhhcyBzdGFydGVkIGJlZm9yZSBoZWFsdGhjaGVjayBwcm9iZXMgYXJlIGluaXRpYXRlZAogICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxNQogICAgICB0eXBlOiBpbnQKICAgIC0g\
bmFtZTogS0FGS0FfSEVBTFRIQ0hFQ0tfVElNRU9VVAogICAgICB0aXRsZTogS2Fma2EgaGVhbHRo\
Y2hlY2sgdGltZW91dAogICAgICBkZXNjcmlwdGlvbjogTnVtYmVyIG9mIHNlY29uZHMgYWZ0ZXIg\
d2hpY2ggdGhlIHByb2JlIHRpbWVzIG91dAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZh\
dWx0OiA1CiAgICAgIHR5cGU6IGludAogICAgLSBuYW1lOiBLQUZLQV9ERUZBVUxUX1JFUExJQ0FU\
SU9OX0ZBQ1RPUgogICAgICB0aXRsZTogRGVmYXVsdCByZXBsaWNhdGlvbiBmYWN0b3IKICAgICAg\
ZGVzY3JpcHRpb246IERlZmF1bHQgcmVwbGljYXRpb24gZmFjdG9yIGZvciBuZXdseSBjcmVhdGVk\
IHRvcGljcwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6\
IGludAogICAgICAK"



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
