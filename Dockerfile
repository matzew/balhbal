FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHN0cmltemktYXBiCmRlc2NyaXB0aW9uOiBBcGFjaGUgS2Fma2Eg\
b24gS3ViZXJuZXRlcyBhbmQgT3BlblNoaWZ0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFN0cmltemkgKEFQQikKICBpbWFnZVVybDogImh0\
dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzQ3Njc0Mjg/cz0yMDAmdj00\
IgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwOi8vc3RyaW16aS5pby9kb2NzL21hc3RlciIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiTWF0dGhpYXMgV2Vzc2VuZG9yZiIgIApwbGFuczoKICAtIG5h\
bWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIHN0\
cmltemktYXBiCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6\
CiAgICAtIG5hbWU6IGFkbWluX3VzZXIKICAgICAgdGl0bGU6IE9wZW5zaGlmdCBBZG1pbiBVc2Vy\
CiAgICAgIHR5cGU6IHN0cmluZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBhZG1p\
bl9wYXNzd29yZAogICAgICB0aXRsZTogT3BlbnNoaWZ0IEFkbWluIFBhc3N3b3JkCiAgICAgIHR5\
cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICAtIG5hbWU6IFpPT0tFRVBFUl9OT0RFX0NPVU5UCiAgICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICAgIGRlZmF1bHQ6IDEKICAgICAgdHlwZTogaW50CiAgICAgIHRpdGxlOiBOdW1iZXIgb2Yg\
Wm9va2VlcGVyIG5vZGVzIGluIHRoZSBwcm9qZWN0CiAgICAtIG5hbWU6IEtBRktBX05PREVfQ09V\
TlQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDogMQogICAgICB0eXBlOiBpbnQK\
ICAgICAgdGl0bGU6IE51bWJlciBvZiBLYWZrYSBub2RlcyBpbiB0aGUgcHJvamVjdAogICAgLSBu\
YW1lOiBLQUZLQV9PRkZTRVRTX1RPUElDX1JFUExJQ0FUSU9OX0ZBQ1RPUgogICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRsZTogVGhl\
IHJlcGxpY2F0aW9uIGZhY3RvciBmb3IgdGhlIG9mZnNldHMgdG9waWMKICAgIC0gbmFtZTogS0FG\
S0FfVFJBTlNBQ1RJT05fU1RBVEVfTE9HX1JFUExJQ0FUSU9OX0ZBQ1RPUgogICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRsZTogVGhl\
IHJlcGxpY2F0aW9uIGZhY3RvciBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvcGljCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
