FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHN0cmltemktYXBiCmRlc2NyaXB0aW9uOiBBcGFjaGUgS2Fma2Eg\
b24gS3ViZXJuZXRlcyBhbmQgT3BlblNoaWZ0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFN0cmltemkgKEFQQikKICBpbWFnZVVybDogImh0\
dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzQ3Njc0Mjg/cz0yMDAmdj00\
IgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwOi8vc3RyaW16aS5pby9kb2NzL21hc3RlciIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZh\
dWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZhdWx0IHBsYW4gZGVwbG95cyBzdHJpbXppLWFw\
YgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgLSBu\
YW1lOiBhZG1pbl91c2VyCiAgICAgIHRpdGxlOiBPcGVuc2hpZnQgQWRtaW4gVXNlcgogICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogYWRtaW5fcGFzc3dv\
cmQKICAgICAgdGl0bGU6IE9wZW5zaGlmdCBBZG1pbiBQYXNzd29yZAogICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
LSBuYW1lOiBaT09LRUVQRVJfTk9ERV9DT1VOVAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBk\
ZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRsZTogTnVtYmVyIG9mIFpvb2tlZXBl\
ciBub2RlcyBpbiB0aGUgcHJvamVjdAogICAgLSBuYW1lOiBLQUZLQV9OT0RFX0NPVU5UCiAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IDEKICAgICAgdHlwZTogaW50CiAgICAgIHRp\
dGxlOiBOdW1iZXIgb2YgS2Fma2Egbm9kZXMgaW4gdGhlIHByb2plY3QKICAgIC0gbmFtZTogS0FG\
S0FfT0ZGU0VUU19UT1BJQ19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUK\
ICAgICAgZGVmYXVsdDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNh\
dGlvbiBmYWN0b3IgZm9yIHRoZSBvZmZzZXRzIHRvcGljCiAgICAtIG5hbWU6IEtBRktBX1RSQU5T\
QUNUSU9OX1NUQVRFX0xPR19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUK\
ICAgICAgZGVmYXVsdDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNh\
dGlvbiBmYWN0b3IgZm9yIHRoZSB0cmFuc2FjdGlvbiB0b3BpYwo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
