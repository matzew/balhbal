FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHN0cmltemktYXBiCmRlc2NyaXB0aW9uOiBBcGFjaGUgS2Fma2Eg\
b24gS3ViZXJuZXRlcyBhbmQgT3BlblNoaWZ0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFN0cmltemkgKEFQQikKICBpbWFnZVVybDogImh0\
dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzQ3Njc0Mjg/cz0yMDAmdj00\
IgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwOi8vc3RyaW16aS5pby9kb2NzLzAuNC4wLyIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6CiAgICAt\
ICJkb2NrZXIuaW8vc3RyaW16aS9jbHVzdGVyLW9wZXJhdG9yOjAuNC4wIgogICAgLSAiZG9ja2Vy\
LmlvL3N0cmltemkvem9va2VlcGVyOjAuNC4wIgogICAgLSAiZG9ja2VyLmlvL3N0cmltemkva2Fm\
a2E6MC40LjAiCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFBlcnNp\
c3RlbnQgZGVwbG95bWVudCBvZiBBcGFjaGUgS2Fma2Egb24gT3BlbnNoaWZ0CiAgICBmcmVlOiBU\
cnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IGFkbWluX3Vz\
ZXIKICAgICAgdGl0bGU6IE9wZW5zaGlmdCBBZG1pbiBVc2VyCiAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICB0aXRs\
ZTogT3BlbnNoaWZ0IEFkbWluIFBhc3N3b3JkCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNw\
bGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IENMVVNU\
RVJfTkFNRQogICAgICB0aXRsZTogTmFtZSBvZiB0aGUgY2x1c3RlcgogICAgICBkZXNjcmlwdGlv\
bjogQWxsIEt1YmVybmV0ZXMgcmVzb3VyY2VzIHdpbGwgYmUgbmFtZWQgYWZ0ZXIgdGhlIGNsdXN0\
ZXIgbmFtZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDogbXktY2x1c3RlcgogICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBaT09LRUVQRVJfTk9ERV9DT1VOVAogICAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRs\
ZTogTnVtYmVyIG9mIFpvb2tlZXBlciBub2RlcyBpbiB0aGUgcHJvamVjdAogICAgLSBuYW1lOiBL\
QUZLQV9OT0RFX0NPVU5UCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IDEKICAg\
ICAgdHlwZTogaW50CiAgICAgIHRpdGxlOiBOdW1iZXIgb2YgS2Fma2Egbm9kZXMgaW4gdGhlIHBy\
b2plY3QKICAgIC0gbmFtZTogWk9PS0VFUEVSX1ZPTFVNRV9DQVBBQ0lUWQogICAgICB0aXRsZTog\
Wm9va2VlcGVyIFZvbHVtZSBDYXBhY2l0eQogICAgICBkZXNjcmlwdGlvbjogVm9sdW1lIHNwYWNl\
IGF2YWlsYWJsZSBmb3IgWm9va2VlcGVyIGRhdGEsIGUuZy4gMUdpLCAyR2kKICAgICAgdHlwZTog\
ZW51bQogICAgICBkZWZhdWx0OiAnMUdpJwogICAgICBlbnVtOiBbJzFHaScsICcyR2knLCAnNUdp\
J10KICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogS0FGS0FfVk9MVU1FX0NBUEFDSVRZ\
CiAgICAgIHRpdGxlOiBLYWZrYSBWb2x1bWUgQ2FwYWNpdHkKICAgICAgZGVzY3JpcHRpb246IFZv\
bHVtZSBzcGFjZSBhdmFpbGFibGUgZm9yIEthZmthIGRhdGEsIGUuZy4gMUdpLCAyR2kKICAgICAg\
dHlwZTogZW51bQogICAgICBkZWZhdWx0OiAnMUdpJwogICAgICBlbnVtOiBbJzFHaScsICcyR2kn\
LCAnNUdpJ10KICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZTogS0FGS0FfT0ZGU0VUU19U\
T1BJQ19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVs\
dDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNhdGlvbiBmYWN0b3Ig\
Zm9yIHRoZSBvZmZzZXRzIHRvcGljCiAgICAtIG5hbWU6IEtBRktBX1RSQU5TQUNUSU9OX1NUQVRF\
X0xPR19SRVBMSUNBVElPTl9GQUNUT1IKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVs\
dDogMQogICAgICB0eXBlOiBpbnQKICAgICAgdGl0bGU6IFRoZSByZXBsaWNhdGlvbiBmYWN0b3Ig\
Zm9yIHRoZSB0cmFuc2FjdGlvbiB0b3BpYwogICAgLSBuYW1lOiBaT09LRUVQRVJfSEVBTFRIQ0hF\
Q0tfREVMQVkKICAgICAgdGl0bGU6IFpvb2tlZXBlciBoZWFsdGhjaGVjayBpbml0aWFsIGRlbGF5\
CiAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB0aGUgY29udGFpbmVy\
IGhhcyBzdGFydGVkIGJlZm9yZSBoZWFsdGhjaGVjayBwcm9iZXMgYXJlIGluaXRpYXRlZAogICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxNQogICAgICB0eXBlOiBpbnQKICAgIC0g\
bmFtZTogWk9PS0VFUEVSX0hFQUxUSENIRUNLX1RJTUVPVVQKICAgICAgdGl0bGU6IFpvb2tlZXBl\
ciBoZWFsdGhjaGVjayB0aW1lb3V0CiAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vjb25k\
cyBhZnRlciB3aGljaCB0aGUgcHJvYmUgdGltZXMgb3V0CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgIGRlZmF1bHQ6IDUKICAgICAgdHlwZTogaW50CiAgICAtIG5hbWU6IEtBRktBX0hFQUxUSENI\
RUNLX0RFTEFZCiAgICAgIHRpdGxlOiBLYWZrYSBoZWFsdGhjaGVjayBpbml0aWFsIGRlbGF5CiAg\
ICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB0aGUgY29udGFpbmVyIGhh\
cyBzdGFydGVkIGJlZm9yZSBoZWFsdGhjaGVjayBwcm9iZXMgYXJlIGluaXRpYXRlZAogICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxNQogICAgICB0eXBlOiBpbnQKICAgIC0gbmFt\
ZTogS0FGS0FfSEVBTFRIQ0hFQ0tfVElNRU9VVAogICAgICB0aXRsZTogS2Fma2EgaGVhbHRoY2hl\
Y2sgdGltZW91dAogICAgICBkZXNjcmlwdGlvbjogTnVtYmVyIG9mIHNlY29uZHMgYWZ0ZXIgd2hp\
Y2ggdGhlIHByb2JlIHRpbWVzIG91dAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0\
OiA1CiAgICAgIHR5cGU6IGludAogICAgLSBuYW1lOiBLQUZLQV9ERUZBVUxUX1JFUExJQ0FUSU9O\
X0ZBQ1RPUgogICAgICB0aXRsZTogRGVmYXVsdCByZXBsaWNhdGlvbiBmYWN0b3IKICAgICAgZGVz\
Y3JpcHRpb246IERlZmF1bHQgcmVwbGljYXRpb24gZmFjdG9yIGZvciBuZXdseSBjcmVhdGVkIHRv\
cGljcwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGlu\
dAo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
