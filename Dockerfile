FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHN0cmltemktYXBiCmRlc2NyaXB0aW9uOiBBcGFjaGUgS2Fma2Eg\
b24gS3ViZXJuZXRlcyBhbmQgT3BlblNoaWZ0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFN0cmltemkgKEFQQikKICBpbWFnZVVybDogImh0\
dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzQ3Njc0Mjg/cz0yMDAmdj00\
IgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwOi8vc3RyaW16aS5pby9kb2NzL21hc3RlciIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIgIApwbGFuczoKICAtIG5hbWU6IGRl\
ZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIHN0cmltemkt\
YXBiCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAt\
IG5hbWU6IGFkbWluX3VzZXIKICAgICAgdGl0bGU6IE9wZW5zaGlmdCBBZG1pbiBVc2VyCiAgICAg\
IHR5cGU6IHN0cmluZwogICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBhZG1pbl9wYXNz\
d29yZAogICAgICB0aXRsZTogT3BlbnNoaWZ0IEFkbWluIFBhc3N3b3JkCiAgICAgIHR5cGU6IHN0\
cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAtIG5hbWU6IFpPT0tFRVBFUl9OT0RFX0NPVU5UCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAg\
IGRlZmF1bHQ6IDEKICAgICAgdHlwZTogaW50CiAgICAgIHRpdGxlOiBOdW1iZXIgb2YgWm9va2Vl\
cGVyIG5vZGVzIGluIHRoZSBwcm9qZWN0CiAgICAtIG5hbWU6IEtBRktBX05PREVfQ09VTlQKICAg\
ICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDogMQogICAgICB0eXBlOiBpbnQKICAgICAg\
dGl0bGU6IE51bWJlciBvZiBLYWZrYSBub2RlcyBpbiB0aGUgcHJvamVjdAogICAgLSBuYW1lOiBL\
QUZLQV9PRkZTRVRTX1RPUElDX1JFUExJQ0FUSU9OX0ZBQ1RPUgogICAgICByZXF1aXJlZDogVHJ1\
ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRsZTogVGhlIHJlcGxp\
Y2F0aW9uIGZhY3RvciBmb3IgdGhlIG9mZnNldHMgdG9waWMKICAgIC0gbmFtZTogS0FGS0FfVFJB\
TlNBQ1RJT05fU1RBVEVfTE9HX1JFUExJQ0FUSU9OX0ZBQ1RPUgogICAgICByZXF1aXJlZDogVHJ1\
ZQogICAgICBkZWZhdWx0OiAxCiAgICAgIHR5cGU6IGludAogICAgICB0aXRsZTogVGhlIHJlcGxp\
Y2F0aW9uIGZhY3RvciBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvcGljCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
